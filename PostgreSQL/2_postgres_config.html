<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>인성의 DB강의</title>
  <link rel="stylesheet" type="text/css" media="screen" href="../css/style.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="../css/github.css" />
</head>
<body>
  <h3>설치 및 설정 변경</h3>

  <h1>postgres.conf 파일</h1>

  <p>
    postgres.conf 파일은 postgres 데이터베이스 설정을 변경할 수 있는 파일이다. 다음과 같은 설정을 변경할 수 있다.
  </p>
  <ol>
    <li>
      listen_address 를 변경하여 postgres 데이터베이스에 허용할 IP 를 설정할 수 있음
    </li>
    <li>
      port 값 변경하여 postgres 데이터베이스 port 를 변경할 수 있음
    </li>
    <li>
      auto vacuum, max connection 등 전반적인 부분을 변경할 수 있음
    </li>
  </ol>

  <p>
    postgres.conf 파일 경로
  </p>
  <ol>
    <li>
      윈도우: C:\Program Files\PostgreSQL\9.5\data
    </li>
    <li>
      우분투: /etc/postgresql/9.5/main (우분투 버전마다 다를수도 있음)
      <br /><br />
      리눅스에서 postgres.conf 파일 찾는 팁!
      <pre><code>sudo find / -name postgresql.conf</code></pre>
    </li>
  </ol>

  <hr />

  <p>
    아래는 윈도우에서 pgAdmin3 툴로 postgresql.conf 파일을 변경하는 방법에 대해 설명한다.<br />
    UI 를 제공하지 않는 리눅스는 sudo vi /etc/postgresql/9.5/main/postgresql.conf 으로 해당 라인을 주석을 제거한 후 원하는 값으로 수정하면 된다.
  </p>

  <h2>port 변경 방법</h2>
  <ol>
    <li>
      pgAdmin3 > DB 연결 > Tools > Server Configuration > postgresql.conf<br />
      <img src="./chapter1/postgres_conf_1.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      port 항목 더블 클릭<br />
      <img src="./chapter1/postgres_conf_3.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      포트 입력 후 Enabled 에 체크<br />
      <img src="./chapter1/postgres_conf_2.png" alt="" class="img-medium m-l-xs" />
    </li>
    <li>
      저장 버튼 클릭<br />
      <img src="./chapter1/postgres_conf_4.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      Stop Service 클릭<br />
      <img src="./chapter1/postgres_conf_5.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      Start Service 클릭, 좌측 하단에 보면 Stop Service 에 대한 결과가 나와있음<br />
      <img src="./chapter1/postgres_conf_6.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      기존에 사용하던 연결 링크 클릭해도 접속이 안됨<br />
      <img src="./chapter1/postgres_conf_7.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      PostgreSQL 9.5 연결 > Properties.. 선택<br />
      <img src="./chapter1/postgres_conf_8.png" alt="" class="img-medium m-l-xs" />
    </li>
    <li>
      포트 변경 후 다시 비밀번호 입력하여 접속하면 접속됨<br />
      <img src="./chapter1/postgres_conf_9.png" alt="" class="img-medium m-l-xs" />
    </li>
  </ol>

  <h2>허용 IP 변경 방법</h2>
  <ol>
    <li>
      listen_address 항목 더블 클릭<br />
      <img src="./chapter1/postgres_conf_3.png" alt="" class="img-large m-l-xs" />
    </li>
    <li>
      허용 IP 입력 후 Enabled 에 체크 (모두 허용 하고 싶으면 * 을 입력)<br />
      <img src="./chapter1/postgres_conf_10.png" alt="" class="img-medium m-l-xs" />
    </li>
    <li>
      postgres 서비스 재시작 후 접속 
    </li>
  </ol>

  <div class="practice">
    <h3>Let's Prcactice</h3>
    <ol>
      <li>
        특정 IP 만 허용하여 실제로 적용되는지 테스트 해보자.
      </li>
      <li>
        리눅스에서 포트 및 IP 를 수정해 보자.
      </li>
      <li>
        pgAdmin3 > Tools > Server Configuration 을 선택하는 것 대신 pgAdmin3 > File > Open postgresql.conf 로 사용해 보자.
      </li>
    </ol>
  </div>
  
  <br /><br />
  <hr />
  <a href="../index.html">처음으로</a>&nbsp;&nbsp;
  <a href="./1_install.html">이전</a>
  <a href="./3_pghba_config.html" class="pull-right">다음</a>
  <footer>
    powered by insung / last modified date: 2018-11
  </footer>
</body>
</html>